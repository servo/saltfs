{% set salt_ = salt %}
{%
  set salt = {
    'version': '2018.3.2',
    'master': salt['grains.filter_by']({
        'defaults': {
          'config': {
            'fileserver_backend': [ 'roots', 'git' ],
            'file_roots': {
              'base': [ '/tmp/salt-testing-root/saltfs' ]
            },
            'gitfs_remotes': [ 'https://github.com/servo/saltfs.git' ],
            'gitfs_env_whitelist': [ 'base' ],
            'hash_type': 'sha384',
            'keep_jobs': 0,
            'pillar_roots': {
              'base': [ '/srv/pillar' ]
            },
            'timeout': 60
          }
        },
        'Ubuntu': {
          'pkg': {
            'name': 'salt-master',
            'version': '2018.3.2+ds-1'
          }
        }
      },
      base='defaults',
      grain='os',
    )
  }
%}
