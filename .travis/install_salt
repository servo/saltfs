#!/usr/bin/env bash

if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then
  printf "$0: installing salt for Linux\n"
  # Travis uses Ubuntu 12.04
  sudo add-apt-repository -y ppa:saltstack/salt
  sudo apt-get -y update
  sudo apt-get -y install salt-minion
elif [[ "${TRAVIS_OS_NAME}" == "osx" ]]; then
  printf "$0: installing salt for Mac OS X\n"
  brew update
  brew install saltstack
else
  if [[ -v TRAVIS_OS_NAME ]]; then
    printf >&2 "$0: unknown os type ${TRAVIS_OS_NAME}\n"
  else
    printf >&2 "$0: environment variable TRAVIS_OS_NAME not set\n"
  fi
  exit 1
fi
